@page "/category-products"

@using WestWindSystem.BLL
@using WestWindSystem.Entities

<h3>Category Products</h3>

<fieldset class="mb-3">
	<legend>Category Selection</legend>
	<div class="mb-3">
		<label class="visually-hidden" for="category">Category:</label>
		<select class="form-select" id="category" @bind="CategoryId">
			<option selected disabled value="0">Select a category</option>
			@if (Categories != null)
			{
				@foreach (var c in Categories)
				{
					<option value="@c.CategoryId">@c.Description</option>
				}
			}
		</select>
	</div>
</fieldset>

@CategoryId

@code {
	[Inject]
	CategoryServices CategoryServices { get; set; }

	[Inject]
	ProductServices ProductServices { get; set; }

	public List<Category>? Categories { get; set; }

	public int CategoryId { get; set; }

	protected override void OnInitialized()
	{
		Categories = CategoryServices.GetAllCategories();
		base.OnInitialized();
	}
}
